"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cluster/route";
exports.ids = ["app/api/cluster/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcluster%2Froute&page=%2Fapi%2Fcluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcluster%2Froute.ts&appDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcluster%2Froute&page=%2Fapi%2Fcluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcluster%2Froute.ts&appDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_dharmikgalla_DHV_project_2_app_api_cluster_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/cluster/route.ts */ \"(rsc)/./app/api/cluster/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cluster/route\",\n        pathname: \"/api/cluster\",\n        filename: \"route\",\n        bundlePath: \"app/api/cluster/route\"\n    },\n    resolvedPagePath: \"/Users/dharmikgalla/DHV-project-2/app/api/cluster/route.ts\",\n    nextConfigOutput,\n    userland: _Users_dharmikgalla_DHV_project_2_app_api_cluster_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/cluster/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbHVzdGVyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbHVzdGVyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2x1c3RlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRoYXJtaWtnYWxsYSUyRkRIVi1wcm9qZWN0LTIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZGhhcm1pa2dhbGxhJTJGREhWLXByb2plY3QtMiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDVTtBQUN2RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3Jlc3QtZXhwcmVzcy8/YzU3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZGhhcm1pa2dhbGxhL0RIVi1wcm9qZWN0LTIvYXBwL2FwaS9jbHVzdGVyL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jbHVzdGVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2x1c3RlclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2x1c3Rlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9kaGFybWlrZ2FsbGEvREhWLXByb2plY3QtMi9hcHAvYXBpL2NsdXN0ZXIvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NsdXN0ZXIvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcluster%2Froute&page=%2Fapi%2Fcluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcluster%2Froute.ts&appDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/cluster/route.ts":
/*!**********************************!*\
  !*** ./app/api/cluster/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _shared_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shared/schema */ \"(rsc)/./shared/schema.ts\");\n/* harmony import */ var _lib_clustering__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/clustering */ \"(rsc)/./app/lib/clustering.ts\");\n\n\n\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { algorithm, dataPoints } = _shared_schema__WEBPACK_IMPORTED_MODULE_1__.clusterRequestSchema.parse(body);\n        const points = dataPoints.map((dp, idx)=>({\n                id: dp.data?.Patient_ID || dp.data?.Crime_ID || dp.data?.Customer_ID || `Point${idx}`,\n                x: dp.x,\n                y: dp.y,\n                data: dp.data\n            }));\n        const result = algorithm === \"agglomerative\" ? (0,_lib_clustering__WEBPACK_IMPORTED_MODULE_2__.agglomerativeClustering)(points) : (0,_lib_clustering__WEBPACK_IMPORTED_MODULE_2__.divisiveClustering)(points);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            steps: result.steps,\n            finalClusters: result.finalClusters,\n            dendrogram: result.dendrogram\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error?.message || \"Failed to perform clustering\"\n        }, {\n            status: 400\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NsdXN0ZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNGO0FBQzZCO0FBRTVFLGVBQWVJLEtBQUtDLEdBQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1ELElBQUlFLElBQUk7UUFDM0IsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFVBQVUsRUFBRSxHQUFHUixnRUFBb0JBLENBQUNTLEtBQUssQ0FBQ0o7UUFFN0QsTUFBTUssU0FBU0YsV0FBV0csR0FBRyxDQUFDLENBQUNDLElBQVNDLE1BQWlCO2dCQUN2REMsSUFBSUYsR0FBR0csSUFBSSxFQUFFQyxjQUFjSixHQUFHRyxJQUFJLEVBQUVFLFlBQVlMLEdBQUdHLElBQUksRUFBRUcsZUFBZSxDQUFDLEtBQUssRUFBRUwsSUFBSSxDQUFDO2dCQUNyRk0sR0FBR1AsR0FBR08sQ0FBQztnQkFDUEMsR0FBR1IsR0FBR1EsQ0FBQztnQkFDUEwsTUFBTUgsR0FBR0csSUFBSTtZQUNmO1FBRUEsTUFBTU0sU0FBU2QsY0FBYyxrQkFDekJOLHdFQUF1QkEsQ0FBQ1MsVUFDeEJSLG1FQUFrQkEsQ0FBQ1E7UUFFdkIsT0FBT1gscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QmdCLFNBQVM7WUFDVEMsT0FBT0YsT0FBT0UsS0FBSztZQUNuQkMsZUFBZUgsT0FBT0csYUFBYTtZQUNuQ0MsWUFBWUosT0FBT0ksVUFBVTtRQUMvQjtJQUNGLEVBQUUsT0FBT0MsT0FBWTtRQUNuQixPQUFPM0IscURBQVlBLENBQUNPLElBQUksQ0FDdEI7WUFBRWdCLFNBQVM7WUFBT0ksT0FBT0EsT0FBT0MsV0FBVztRQUErQixHQUMxRTtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Jlc3QtZXhwcmVzcy8uL2FwcC9hcGkvY2x1c3Rlci9yb3V0ZS50cz8zM2YzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGNsdXN0ZXJSZXF1ZXN0U2NoZW1hIH0gZnJvbSBcIkBzaGFyZWQvc2NoZW1hXCI7XG5pbXBvcnQgeyBhZ2dsb21lcmF0aXZlQ2x1c3RlcmluZywgZGl2aXNpdmVDbHVzdGVyaW5nIH0gZnJvbSBcIi4uLy4uL2xpYi9jbHVzdGVyaW5nXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zdCB7IGFsZ29yaXRobSwgZGF0YVBvaW50cyB9ID0gY2x1c3RlclJlcXVlc3RTY2hlbWEucGFyc2UoYm9keSk7XG5cbiAgICBjb25zdCBwb2ludHMgPSBkYXRhUG9pbnRzLm1hcCgoZHA6IGFueSwgaWR4OiBudW1iZXIpID0+ICh7XG4gICAgICBpZDogZHAuZGF0YT8uUGF0aWVudF9JRCB8fCBkcC5kYXRhPy5DcmltZV9JRCB8fCBkcC5kYXRhPy5DdXN0b21lcl9JRCB8fCBgUG9pbnQke2lkeH1gLFxuICAgICAgeDogZHAueCxcbiAgICAgIHk6IGRwLnksXG4gICAgICBkYXRhOiBkcC5kYXRhLFxuICAgIH0pKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGFsZ29yaXRobSA9PT0gXCJhZ2dsb21lcmF0aXZlXCJcbiAgICAgID8gYWdnbG9tZXJhdGl2ZUNsdXN0ZXJpbmcocG9pbnRzKVxuICAgICAgOiBkaXZpc2l2ZUNsdXN0ZXJpbmcocG9pbnRzKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc3RlcHM6IHJlc3VsdC5zdGVwcyxcbiAgICAgIGZpbmFsQ2x1c3RlcnM6IHJlc3VsdC5maW5hbENsdXN0ZXJzLFxuICAgICAgZGVuZHJvZ3JhbTogcmVzdWx0LmRlbmRyb2dyYW0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gcGVyZm9ybSBjbHVzdGVyaW5nXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfSxcbiAgICApO1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjbHVzdGVyUmVxdWVzdFNjaGVtYSIsImFnZ2xvbWVyYXRpdmVDbHVzdGVyaW5nIiwiZGl2aXNpdmVDbHVzdGVyaW5nIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwiYWxnb3JpdGhtIiwiZGF0YVBvaW50cyIsInBhcnNlIiwicG9pbnRzIiwibWFwIiwiZHAiLCJpZHgiLCJpZCIsImRhdGEiLCJQYXRpZW50X0lEIiwiQ3JpbWVfSUQiLCJDdXN0b21lcl9JRCIsIngiLCJ5IiwicmVzdWx0Iiwic3VjY2VzcyIsInN0ZXBzIiwiZmluYWxDbHVzdGVycyIsImRlbmRyb2dyYW0iLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/cluster/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/clustering.ts":
/*!*******************************!*\
  !*** ./app/lib/clustering.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   agglomerativeClustering: () => (/* binding */ agglomerativeClustering),\n/* harmony export */   divisiveClustering: () => (/* binding */ divisiveClustering),\n/* harmony export */   euclideanDistance: () => (/* binding */ euclideanDistance)\n/* harmony export */ });\n// Calculate Euclidean distance between two points\nfunction euclideanDistance(p1, p2) {\n    return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n}\n// Calculate distance between two clusters (average linkage)\nfunction clusterDistance(c1, c2, points) {\n    let totalDistance = 0;\n    let count = 0;\n    for (const i of c1.points){\n        for (const j of c2.points){\n            if (points[i] && points[j]) {\n                totalDistance += euclideanDistance(points[i], points[j]);\n                count++;\n            }\n        }\n    }\n    return count > 0 ? totalDistance / count : Infinity;\n}\n// Get cluster center\nfunction getClusterCenter(cluster, points) {\n    let sumX = 0;\n    let sumY = 0;\n    let count = 0;\n    for (const idx of cluster.points){\n        if (points[idx]) {\n            sumX += points[idx].x;\n            sumY += points[idx].y;\n            count++;\n        }\n    }\n    return count > 0 ? {\n        x: sumX / count,\n        y: sumY / count\n    } : {\n        x: 0,\n        y: 0\n    };\n}\n// Agglomerative (Bottom-Up) Hierarchical Clustering\nfunction agglomerativeClustering(points) {\n    const steps = [];\n    const dendrogramNodes = points.map((p, idx)=>({\n            height: 0,\n            label: p.id,\n            indices: [\n                idx\n            ]\n        }));\n    // Initialize: each point is its own cluster\n    let clusters = points.map((p, idx)=>({\n            points: [\n                idx\n            ],\n            center: {\n                x: p.x,\n                y: p.y\n            }\n        }));\n    let stepNumber = 0;\n    // Record initial state\n    steps.push({\n        stepNumber: stepNumber++,\n        description: `All ${points.length} points start as individual clusters`,\n        cluster1: [],\n        cluster2: [],\n        mergedCluster: [],\n        distance: 0,\n        action: \"connect\"\n    });\n    // Merge until we have one cluster\n    while(clusters.length > 1){\n        // Find the two closest clusters\n        let minDistance = Infinity;\n        let mergeI = -1;\n        let mergeJ = -1;\n        for(let i = 0; i < clusters.length; i++){\n            for(let j = i + 1; j < clusters.length; j++){\n                const dist = clusterDistance(clusters[i], clusters[j], points);\n                if (dist < minDistance) {\n                    minDistance = dist;\n                    mergeI = i;\n                    mergeJ = j;\n                }\n            }\n        }\n        if (mergeI === -1 || mergeJ === -1) break;\n        const cluster1 = clusters[mergeI];\n        const cluster2 = clusters[mergeJ];\n        // Merge the clusters\n        const mergedPoints = [\n            ...cluster1.points,\n            ...cluster2.points\n        ];\n        const mergedCluster = {\n            points: mergedPoints,\n            center: {\n                x: 0,\n                y: 0\n            }\n        };\n        mergedCluster.center = getClusterCenter(mergedCluster, points);\n        // Create dendrogram node for this merge\n        const newNode = {\n            left: dendrogramNodes[mergeI],\n            right: dendrogramNodes[mergeJ],\n            height: minDistance,\n            indices: mergedPoints\n        };\n        // Record this step\n        const action = cluster1.points.length === 1 && cluster2.points.length === 1 ? \"connect\" : \"merge\";\n        steps.push({\n            stepNumber: stepNumber++,\n            description: action === \"connect\" ? `Connecting ${points[cluster1.points[0]]?.id} and ${points[cluster2.points[0]]?.id} (distance: ${minDistance.toFixed(2)})` : `Merging cluster of ${cluster1.points.length} with cluster of ${cluster2.points.length} (distance: ${minDistance.toFixed(2)})`,\n            cluster1: cluster1.points,\n            cluster2: cluster2.points,\n            mergedCluster: mergedPoints,\n            distance: minDistance,\n            action\n        });\n        // Update clusters array\n        clusters = clusters.filter((_, idx)=>idx !== mergeI && idx !== mergeJ);\n        clusters.push(mergedCluster);\n        // Update dendrogram nodes\n        dendrogramNodes[mergeI] = newNode;\n        dendrogramNodes.splice(mergeJ, 1);\n    }\n    steps.push({\n        stepNumber: stepNumber++,\n        description: \"Clustering complete - all points merged into one cluster\",\n        cluster1: [],\n        cluster2: [],\n        mergedCluster: clusters[0]?.points || [],\n        distance: 0,\n        action: \"complete\"\n    });\n    return {\n        steps,\n        dendrogram: dendrogramNodes[0] || null,\n        finalClusters: getFinalClusters(steps, points.length, 3)\n    };\n}\n// Divisive (Top-Down) Hierarchical Clustering\nfunction divisiveClustering(points) {\n    const steps = [];\n    // Start with all points in one cluster\n    let clusters = [\n        {\n            points: Array.from({\n                length: points.length\n            }, (_, i)=>i),\n            center: {\n                x: 0,\n                y: 0\n            }\n        }\n    ];\n    clusters[0].center = getClusterCenter(clusters[0], points);\n    let stepNumber = 0;\n    // Record initial state\n    steps.push({\n        stepNumber: stepNumber++,\n        description: `All ${points.length} points start in one large cluster`,\n        cluster1: [],\n        cluster2: [],\n        mergedCluster: Array.from({\n            length: points.length\n        }, (_, i)=>i),\n        distance: 0,\n        action: \"connect\"\n    });\n    // Divide until each cluster has reasonable size\n    while(clusters.length < Math.min(points.length, 4)){\n        // Find the largest cluster to split\n        let maxSize = 0;\n        let splitIdx = 0;\n        clusters.forEach((cluster, idx)=>{\n            if (cluster.points.length > maxSize) {\n                maxSize = cluster.points.length;\n                splitIdx = idx;\n            }\n        });\n        if (clusters[splitIdx].points.length <= 1) break;\n        // Split using k-means (k=2) on this cluster\n        const clusterToSplit = clusters[splitIdx];\n        const { cluster1, cluster2 } = splitCluster(clusterToSplit, points);\n        if (cluster1.points.length === 0 || cluster2.points.length === 0) break;\n        steps.push({\n            stepNumber: stepNumber++,\n            description: `Dividing cluster of ${clusterToSplit.points.length} into ${cluster1.points.length} and ${cluster2.points.length}`,\n            cluster1: cluster1.points,\n            cluster2: cluster2.points,\n            mergedCluster: clusterToSplit.points,\n            distance: euclideanDistance(cluster1.center, cluster2.center),\n            action: \"merge\"\n        });\n        // Replace the split cluster with two new clusters\n        clusters.splice(splitIdx, 1, cluster1, cluster2);\n    }\n    steps.push({\n        stepNumber: stepNumber++,\n        description: \"Clustering complete - all clusters divided\",\n        cluster1: [],\n        cluster2: [],\n        mergedCluster: [],\n        distance: 0,\n        action: \"complete\"\n    });\n    return {\n        steps,\n        dendrogram: null,\n        finalClusters: clusters.map((c)=>c.points)\n    };\n}\n// Split a cluster into two using k-means (k=2)\nfunction splitCluster(cluster, points) {\n    if (cluster.points.length <= 1) {\n        return {\n            cluster1: cluster,\n            cluster2: {\n                points: [],\n                center: {\n                    x: 0,\n                    y: 0\n                }\n            }\n        };\n    }\n    // Initialize two centroids randomly from cluster points\n    const indices = cluster.points;\n    const c1Idx = indices[0];\n    const c2Idx = indices[Math.floor(indices.length / 2)];\n    let centroid1 = {\n        ...points[c1Idx]\n    };\n    let centroid2 = {\n        ...points[c2Idx]\n    };\n    let assignment = new Array(points.length).fill(0);\n    let changed = true;\n    let iterations = 0;\n    // Run k-means for a few iterations\n    while(changed && iterations < 10){\n        changed = false;\n        iterations++;\n        // Assign points to nearest centroid\n        for (const idx of indices){\n            if (!points[idx]) continue;\n            const dist1 = euclideanDistance(points[idx], centroid1);\n            const dist2 = euclideanDistance(points[idx], centroid2);\n            const newAssignment = dist1 < dist2 ? 0 : 1;\n            if (assignment[idx] !== newAssignment) {\n                assignment[idx] = newAssignment;\n                changed = true;\n            }\n        }\n        // Update centroids\n        const group1 = indices.filter((idx)=>assignment[idx] === 0);\n        const group2 = indices.filter((idx)=>assignment[idx] === 1);\n        if (group1.length > 0) {\n            centroid1 = {\n                x: group1.reduce((sum, idx)=>sum + points[idx].x, 0) / group1.length,\n                y: group1.reduce((sum, idx)=>sum + points[idx].y, 0) / group1.length,\n                id: \"\",\n                data: null\n            };\n        }\n        if (group2.length > 0) {\n            centroid2 = {\n                x: group2.reduce((sum, idx)=>sum + points[idx].x, 0) / group2.length,\n                y: group2.reduce((sum, idx)=>sum + points[idx].y, 0) / group2.length,\n                id: \"\",\n                data: null\n            };\n        }\n    }\n    const group1 = indices.filter((idx)=>assignment[idx] === 0);\n    const group2 = indices.filter((idx)=>assignment[idx] === 1);\n    return {\n        cluster1: {\n            points: group1,\n            center: centroid1\n        },\n        cluster2: {\n            points: group2,\n            center: centroid2\n        }\n    };\n}\n// Get final clusters from steps\nfunction getFinalClusters(steps, numPoints, targetClusters) {\n    if (steps.length === 0) {\n        return [\n            Array.from({\n                length: numPoints\n            }, (_, i)=>i)\n        ];\n    }\n    // Get clusters at a specific step that gives us close to targetClusters\n    const targetStep = Math.max(0, steps.length - targetClusters - 1);\n    // Track which points belong to which cluster\n    const pointToCluster = new Map();\n    const clusters = new Map();\n    // Initialize each point as its own cluster\n    for(let i = 0; i < numPoints; i++){\n        pointToCluster.set(i, i);\n        clusters.set(i, new Set([\n            i\n        ]));\n    }\n    // Apply merges up to targetStep\n    for(let i = 0; i < Math.min(targetStep, steps.length); i++){\n        const step = steps[i];\n        if (step.action === \"complete\") continue;\n        const cluster1Id = pointToCluster.get(step.cluster1[0]);\n        const cluster2Id = pointToCluster.get(step.cluster2[0]);\n        if (cluster1Id === undefined || cluster2Id === undefined) continue;\n        const cluster1Points = clusters.get(cluster1Id);\n        const cluster2Points = clusters.get(cluster2Id);\n        if (!cluster1Points || !cluster2Points) continue;\n        // Merge cluster2 into cluster1\n        cluster2Points.forEach((point)=>{\n            cluster1Points.add(point);\n            pointToCluster.set(point, cluster1Id);\n        });\n        clusters.delete(cluster2Id);\n    }\n    // Convert to array format\n    return Array.from(clusters.values()).map((cluster)=>Array.from(cluster));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzVCLFNBQVN1RSxNQUFNLElBQUk3RSxHQUFHLENBQUNQLENBQUFBLFVBQVd3QyxNQUFNQyxJQUFJLENBQUN6QztBQUNqRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Jlc3QtZXhwcmVzcy8uL2FwcC9saWIvY2x1c3RlcmluZy50cz9mNWI1Il0sInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBQb2ludCB7XG4gIGlkOiBzdHJpbmc7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBkYXRhOiBhbnk7XG59XG5cbmludGVyZmFjZSBDbHVzdGVyIHtcbiAgcG9pbnRzOiBudW1iZXJbXTtcbiAgY2VudGVyOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XG59XG5cbmludGVyZmFjZSBNZXJnZVN0ZXAge1xuICBzdGVwTnVtYmVyOiBudW1iZXI7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNsdXN0ZXIxOiBudW1iZXJbXTtcbiAgY2x1c3RlcjI6IG51bWJlcltdO1xuICBtZXJnZWRDbHVzdGVyOiBudW1iZXJbXTtcbiAgZGlzdGFuY2U6IG51bWJlcjtcbiAgYWN0aW9uOiAnY29ubmVjdCcgfCAnbWVyZ2UnIHwgJ2NvbXBsZXRlJztcbn1cblxuaW50ZXJmYWNlIERlbmRyb2dyYW1Ob2RlIHtcbiAgbGVmdD86IERlbmRyb2dyYW1Ob2RlO1xuICByaWdodD86IERlbmRyb2dyYW1Ob2RlO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIGluZGljZXM/OiBudW1iZXJbXTtcbn1cblxuLy8gQ2FsY3VsYXRlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcbmV4cG9ydCBmdW5jdGlvbiBldWNsaWRlYW5EaXN0YW5jZShwMTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LCBwMjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9KTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguc3FydCgocDEueCAtIHAyLngpICoqIDIgKyAocDEueSAtIHAyLnkpICoqIDIpO1xufVxuXG4vLyBDYWxjdWxhdGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gY2x1c3RlcnMgKGF2ZXJhZ2UgbGlua2FnZSlcbmZ1bmN0aW9uIGNsdXN0ZXJEaXN0YW5jZShjMTogQ2x1c3RlciwgYzI6IENsdXN0ZXIsIHBvaW50czogUG9pbnRbXSk6IG51bWJlciB7XG4gIGxldCB0b3RhbERpc3RhbmNlID0gMDtcbiAgbGV0IGNvdW50ID0gMDtcblxuICBmb3IgKGNvbnN0IGkgb2YgYzEucG9pbnRzKSB7XG4gICAgZm9yIChjb25zdCBqIG9mIGMyLnBvaW50cykge1xuICAgICAgaWYgKHBvaW50c1tpXSAmJiBwb2ludHNbal0pIHtcbiAgICAgICAgdG90YWxEaXN0YW5jZSArPSBldWNsaWRlYW5EaXN0YW5jZShwb2ludHNbaV0sIHBvaW50c1tqXSk7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvdW50ID4gMCA/IHRvdGFsRGlzdGFuY2UgLyBjb3VudCA6IEluZmluaXR5O1xufVxuXG4vLyBHZXQgY2x1c3RlciBjZW50ZXJcbmZ1bmN0aW9uIGdldENsdXN0ZXJDZW50ZXIoY2x1c3RlcjogQ2x1c3RlciwgcG9pbnRzOiBQb2ludFtdKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9IHtcbiAgbGV0IHN1bVggPSAwO1xuICBsZXQgc3VtWSA9IDA7XG4gIGxldCBjb3VudCA9IDA7XG5cbiAgZm9yIChjb25zdCBpZHggb2YgY2x1c3Rlci5wb2ludHMpIHtcbiAgICBpZiAocG9pbnRzW2lkeF0pIHtcbiAgICAgIHN1bVggKz0gcG9pbnRzW2lkeF0ueDtcbiAgICAgIHN1bVkgKz0gcG9pbnRzW2lkeF0ueTtcbiAgICAgIGNvdW50Kys7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvdW50ID4gMCA/IHsgeDogc3VtWCAvIGNvdW50LCB5OiBzdW1ZIC8gY291bnQgfSA6IHsgeDogMCwgeTogMCB9O1xufVxuXG4vLyBBZ2dsb21lcmF0aXZlIChCb3R0b20tVXApIEhpZXJhcmNoaWNhbCBDbHVzdGVyaW5nXG5leHBvcnQgZnVuY3Rpb24gYWdnbG9tZXJhdGl2ZUNsdXN0ZXJpbmcocG9pbnRzOiBQb2ludFtdKSB7XG4gIGNvbnN0IHN0ZXBzOiBNZXJnZVN0ZXBbXSA9IFtdO1xuICBjb25zdCBkZW5kcm9ncmFtTm9kZXM6IERlbmRyb2dyYW1Ob2RlW10gPSBwb2ludHMubWFwKChwLCBpZHgpID0+ICh7XG4gICAgaGVpZ2h0OiAwLFxuICAgIGxhYmVsOiBwLmlkLFxuICAgIGluZGljZXM6IFtpZHhdLFxuICB9KSk7XG5cbiAgLy8gSW5pdGlhbGl6ZTogZWFjaCBwb2ludCBpcyBpdHMgb3duIGNsdXN0ZXJcbiAgbGV0IGNsdXN0ZXJzOiBDbHVzdGVyW10gPSBwb2ludHMubWFwKChwLCBpZHgpID0+ICh7XG4gICAgcG9pbnRzOiBbaWR4XSxcbiAgICBjZW50ZXI6IHsgeDogcC54LCB5OiBwLnkgfSxcbiAgfSkpO1xuXG4gIGxldCBzdGVwTnVtYmVyID0gMDtcblxuICAvLyBSZWNvcmQgaW5pdGlhbCBzdGF0ZVxuICBzdGVwcy5wdXNoKHtcbiAgICBzdGVwTnVtYmVyOiBzdGVwTnVtYmVyKyssXG4gICAgZGVzY3JpcHRpb246IGBBbGwgJHtwb2ludHMubGVuZ3RofSBwb2ludHMgc3RhcnQgYXMgaW5kaXZpZHVhbCBjbHVzdGVyc2AsXG4gICAgY2x1c3RlcjE6IFtdLFxuICAgIGNsdXN0ZXIyOiBbXSxcbiAgICBtZXJnZWRDbHVzdGVyOiBbXSxcbiAgICBkaXN0YW5jZTogMCxcbiAgICBhY3Rpb246ICdjb25uZWN0JyxcbiAgfSk7XG5cbiAgLy8gTWVyZ2UgdW50aWwgd2UgaGF2ZSBvbmUgY2x1c3RlclxuICB3aGlsZSAoY2x1c3RlcnMubGVuZ3RoID4gMSkge1xuICAgIC8vIEZpbmQgdGhlIHR3byBjbG9zZXN0IGNsdXN0ZXJzXG4gICAgbGV0IG1pbkRpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgbGV0IG1lcmdlSSA9IC0xO1xuICAgIGxldCBtZXJnZUogPSAtMTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2x1c3RlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGNsdXN0ZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGRpc3QgPSBjbHVzdGVyRGlzdGFuY2UoY2x1c3RlcnNbaV0sIGNsdXN0ZXJzW2pdLCBwb2ludHMpO1xuICAgICAgICBpZiAoZGlzdCA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0O1xuICAgICAgICAgIG1lcmdlSSA9IGk7XG4gICAgICAgICAgbWVyZ2VKID0gajtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtZXJnZUkgPT09IC0xIHx8IG1lcmdlSiA9PT0gLTEpIGJyZWFrO1xuXG4gICAgY29uc3QgY2x1c3RlcjEgPSBjbHVzdGVyc1ttZXJnZUldO1xuICAgIGNvbnN0IGNsdXN0ZXIyID0gY2x1c3RlcnNbbWVyZ2VKXTtcblxuICAgIC8vIE1lcmdlIHRoZSBjbHVzdGVyc1xuICAgIGNvbnN0IG1lcmdlZFBvaW50cyA9IFsuLi5jbHVzdGVyMS5wb2ludHMsIC4uLmNsdXN0ZXIyLnBvaW50c107XG4gICAgY29uc3QgbWVyZ2VkQ2x1c3RlcjogQ2x1c3RlciA9IHtcbiAgICAgIHBvaW50czogbWVyZ2VkUG9pbnRzLFxuICAgICAgY2VudGVyOiB7IHg6IDAsIHk6IDAgfSxcbiAgICB9O1xuICAgIG1lcmdlZENsdXN0ZXIuY2VudGVyID0gZ2V0Q2x1c3RlckNlbnRlcihtZXJnZWRDbHVzdGVyLCBwb2ludHMpO1xuXG4gICAgLy8gQ3JlYXRlIGRlbmRyb2dyYW0gbm9kZSBmb3IgdGhpcyBtZXJnZVxuICAgIGNvbnN0IG5ld05vZGU6IERlbmRyb2dyYW1Ob2RlID0ge1xuICAgICAgbGVmdDogZGVuZHJvZ3JhbU5vZGVzW21lcmdlSV0sXG4gICAgICByaWdodDogZGVuZHJvZ3JhbU5vZGVzW21lcmdlSl0sXG4gICAgICBoZWlnaHQ6IG1pbkRpc3RhbmNlLFxuICAgICAgaW5kaWNlczogbWVyZ2VkUG9pbnRzLFxuICAgIH07XG5cbiAgICAvLyBSZWNvcmQgdGhpcyBzdGVwXG4gICAgY29uc3QgYWN0aW9uID0gY2x1c3RlcjEucG9pbnRzLmxlbmd0aCA9PT0gMSAmJiBjbHVzdGVyMi5wb2ludHMubGVuZ3RoID09PSAxID8gJ2Nvbm5lY3QnIDogJ21lcmdlJztcbiAgICBcbiAgICBzdGVwcy5wdXNoKHtcbiAgICAgIHN0ZXBOdW1iZXI6IHN0ZXBOdW1iZXIrKyxcbiAgICAgIGRlc2NyaXB0aW9uOiBhY3Rpb24gPT09ICdjb25uZWN0JyBcbiAgICAgICAgPyBgQ29ubmVjdGluZyAke3BvaW50c1tjbHVzdGVyMS5wb2ludHNbMF1dPy5pZH0gYW5kICR7cG9pbnRzW2NsdXN0ZXIyLnBvaW50c1swXV0/LmlkfSAoZGlzdGFuY2U6ICR7bWluRGlzdGFuY2UudG9GaXhlZCgyKX0pYFxuICAgICAgICA6IGBNZXJnaW5nIGNsdXN0ZXIgb2YgJHtjbHVzdGVyMS5wb2ludHMubGVuZ3RofSB3aXRoIGNsdXN0ZXIgb2YgJHtjbHVzdGVyMi5wb2ludHMubGVuZ3RofSAoZGlzdGFuY2U6ICR7bWluRGlzdGFuY2UudG9GaXhlZCgyKX0pYCxcbiAgICAgIGNsdXN0ZXIxOiBjbHVzdGVyMS5wb2ludHMsXG4gICAgICBjbHVzdGVyMjogY2x1c3RlcjIucG9pbnRzLFxuICAgICAgbWVyZ2VkQ2x1c3RlcjogbWVyZ2VkUG9pbnRzLFxuICAgICAgZGlzdGFuY2U6IG1pbkRpc3RhbmNlLFxuICAgICAgYWN0aW9uLFxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGNsdXN0ZXJzIGFycmF5XG4gICAgY2x1c3RlcnMgPSBjbHVzdGVycy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICE9PSBtZXJnZUkgJiYgaWR4ICE9PSBtZXJnZUopO1xuICAgIGNsdXN0ZXJzLnB1c2gobWVyZ2VkQ2x1c3Rlcik7XG5cbiAgICAvLyBVcGRhdGUgZGVuZHJvZ3JhbSBub2Rlc1xuICAgIGRlbmRyb2dyYW1Ob2Rlc1ttZXJnZUldID0gbmV3Tm9kZTtcbiAgICBkZW5kcm9ncmFtTm9kZXMuc3BsaWNlKG1lcmdlSiwgMSk7XG4gIH1cblxuICBzdGVwcy5wdXNoKHtcbiAgICBzdGVwTnVtYmVyOiBzdGVwTnVtYmVyKyssXG4gICAgZGVzY3JpcHRpb246ICdDbHVzdGVyaW5nIGNvbXBsZXRlIC0gYWxsIHBvaW50cyBtZXJnZWQgaW50byBvbmUgY2x1c3RlcicsXG4gICAgY2x1c3RlcjE6IFtdLFxuICAgIGNsdXN0ZXIyOiBbXSxcbiAgICBtZXJnZWRDbHVzdGVyOiBjbHVzdGVyc1swXT8ucG9pbnRzIHx8IFtdLFxuICAgIGRpc3RhbmNlOiAwLFxuICAgIGFjdGlvbjogJ2NvbXBsZXRlJyxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGVwcyxcbiAgICBkZW5kcm9ncmFtOiBkZW5kcm9ncmFtTm9kZXNbMF0gfHwgbnVsbCxcbiAgICBmaW5hbENsdXN0ZXJzOiBnZXRGaW5hbENsdXN0ZXJzKHN0ZXBzLCBwb2ludHMubGVuZ3RoLCAzKSwgLy8gR2V0IDMtNCBmaW5hbCBjbHVzdGVyc1xuICB9O1xufVxuXG4vLyBEaXZpc2l2ZSAoVG9wLURvd24pIEhpZXJhcmNoaWNhbCBDbHVzdGVyaW5nXG5leHBvcnQgZnVuY3Rpb24gZGl2aXNpdmVDbHVzdGVyaW5nKHBvaW50czogUG9pbnRbXSkge1xuICBjb25zdCBzdGVwczogTWVyZ2VTdGVwW10gPSBbXTtcbiAgXG4gIC8vIFN0YXJ0IHdpdGggYWxsIHBvaW50cyBpbiBvbmUgY2x1c3RlclxuICBsZXQgY2x1c3RlcnM6IENsdXN0ZXJbXSA9IFt7XG4gICAgcG9pbnRzOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBwb2ludHMubGVuZ3RoIH0sIChfLCBpKSA9PiBpKSxcbiAgICBjZW50ZXI6IHsgeDogMCwgeTogMCB9LFxuICB9XTtcbiAgY2x1c3RlcnNbMF0uY2VudGVyID0gZ2V0Q2x1c3RlckNlbnRlcihjbHVzdGVyc1swXSwgcG9pbnRzKTtcblxuICBsZXQgc3RlcE51bWJlciA9IDA7XG5cbiAgLy8gUmVjb3JkIGluaXRpYWwgc3RhdGVcbiAgc3RlcHMucHVzaCh7XG4gICAgc3RlcE51bWJlcjogc3RlcE51bWJlcisrLFxuICAgIGRlc2NyaXB0aW9uOiBgQWxsICR7cG9pbnRzLmxlbmd0aH0gcG9pbnRzIHN0YXJ0IGluIG9uZSBsYXJnZSBjbHVzdGVyYCxcbiAgICBjbHVzdGVyMTogW10sXG4gICAgY2x1c3RlcjI6IFtdLFxuICAgIG1lcmdlZENsdXN0ZXI6IEFycmF5LmZyb20oeyBsZW5ndGg6IHBvaW50cy5sZW5ndGggfSwgKF8sIGkpID0+IGkpLFxuICAgIGRpc3RhbmNlOiAwLFxuICAgIGFjdGlvbjogJ2Nvbm5lY3QnLFxuICB9KTtcblxuICAvLyBEaXZpZGUgdW50aWwgZWFjaCBjbHVzdGVyIGhhcyByZWFzb25hYmxlIHNpemVcbiAgd2hpbGUgKGNsdXN0ZXJzLmxlbmd0aCA8IE1hdGgubWluKHBvaW50cy5sZW5ndGgsIDQpKSB7XG4gICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBjbHVzdGVyIHRvIHNwbGl0XG4gICAgbGV0IG1heFNpemUgPSAwO1xuICAgIGxldCBzcGxpdElkeCA9IDA7XG5cbiAgICBjbHVzdGVycy5mb3JFYWNoKChjbHVzdGVyLCBpZHgpID0+IHtcbiAgICAgIGlmIChjbHVzdGVyLnBvaW50cy5sZW5ndGggPiBtYXhTaXplKSB7XG4gICAgICAgIG1heFNpemUgPSBjbHVzdGVyLnBvaW50cy5sZW5ndGg7XG4gICAgICAgIHNwbGl0SWR4ID0gaWR4O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGNsdXN0ZXJzW3NwbGl0SWR4XS5wb2ludHMubGVuZ3RoIDw9IDEpIGJyZWFrO1xuXG4gICAgLy8gU3BsaXQgdXNpbmcgay1tZWFucyAoaz0yKSBvbiB0aGlzIGNsdXN0ZXJcbiAgICBjb25zdCBjbHVzdGVyVG9TcGxpdCA9IGNsdXN0ZXJzW3NwbGl0SWR4XTtcbiAgICBjb25zdCB7IGNsdXN0ZXIxLCBjbHVzdGVyMiB9ID0gc3BsaXRDbHVzdGVyKGNsdXN0ZXJUb1NwbGl0LCBwb2ludHMpO1xuXG4gICAgaWYgKGNsdXN0ZXIxLnBvaW50cy5sZW5ndGggPT09IDAgfHwgY2x1c3RlcjIucG9pbnRzLmxlbmd0aCA9PT0gMCkgYnJlYWs7XG5cbiAgICBzdGVwcy5wdXNoKHtcbiAgICAgIHN0ZXBOdW1iZXI6IHN0ZXBOdW1iZXIrKyxcbiAgICAgIGRlc2NyaXB0aW9uOiBgRGl2aWRpbmcgY2x1c3RlciBvZiAke2NsdXN0ZXJUb1NwbGl0LnBvaW50cy5sZW5ndGh9IGludG8gJHtjbHVzdGVyMS5wb2ludHMubGVuZ3RofSBhbmQgJHtjbHVzdGVyMi5wb2ludHMubGVuZ3RofWAsXG4gICAgICBjbHVzdGVyMTogY2x1c3RlcjEucG9pbnRzLFxuICAgICAgY2x1c3RlcjI6IGNsdXN0ZXIyLnBvaW50cyxcbiAgICAgIG1lcmdlZENsdXN0ZXI6IGNsdXN0ZXJUb1NwbGl0LnBvaW50cyxcbiAgICAgIGRpc3RhbmNlOiBldWNsaWRlYW5EaXN0YW5jZShjbHVzdGVyMS5jZW50ZXIsIGNsdXN0ZXIyLmNlbnRlciksXG4gICAgICBhY3Rpb246ICdtZXJnZScsXG4gICAgfSk7XG5cbiAgICAvLyBSZXBsYWNlIHRoZSBzcGxpdCBjbHVzdGVyIHdpdGggdHdvIG5ldyBjbHVzdGVyc1xuICAgIGNsdXN0ZXJzLnNwbGljZShzcGxpdElkeCwgMSwgY2x1c3RlcjEsIGNsdXN0ZXIyKTtcbiAgfVxuXG4gIHN0ZXBzLnB1c2goe1xuICAgIHN0ZXBOdW1iZXI6IHN0ZXBOdW1iZXIrKyxcbiAgICBkZXNjcmlwdGlvbjogJ0NsdXN0ZXJpbmcgY29tcGxldGUgLSBhbGwgY2x1c3RlcnMgZGl2aWRlZCcsXG4gICAgY2x1c3RlcjE6IFtdLFxuICAgIGNsdXN0ZXIyOiBbXSxcbiAgICBtZXJnZWRDbHVzdGVyOiBbXSxcbiAgICBkaXN0YW5jZTogMCxcbiAgICBhY3Rpb246ICdjb21wbGV0ZScsXG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgc3RlcHMsXG4gICAgZGVuZHJvZ3JhbTogbnVsbCwgLy8gRGl2aXNpdmUgZGVuZHJvZ3JhbXMgYXJlIG1vcmUgY29tcGxleCB0byBidWlsZFxuICAgIGZpbmFsQ2x1c3RlcnM6IGNsdXN0ZXJzLm1hcChjID0+IGMucG9pbnRzKSxcbiAgfTtcbn1cblxuLy8gU3BsaXQgYSBjbHVzdGVyIGludG8gdHdvIHVzaW5nIGstbWVhbnMgKGs9MilcbmZ1bmN0aW9uIHNwbGl0Q2x1c3RlcihjbHVzdGVyOiBDbHVzdGVyLCBwb2ludHM6IFBvaW50W10pOiB7IGNsdXN0ZXIxOiBDbHVzdGVyOyBjbHVzdGVyMjogQ2x1c3RlciB9IHtcbiAgaWYgKGNsdXN0ZXIucG9pbnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsdXN0ZXIxOiBjbHVzdGVyLFxuICAgICAgY2x1c3RlcjI6IHsgcG9pbnRzOiBbXSwgY2VudGVyOiB7IHg6IDAsIHk6IDAgfSB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJbml0aWFsaXplIHR3byBjZW50cm9pZHMgcmFuZG9tbHkgZnJvbSBjbHVzdGVyIHBvaW50c1xuICBjb25zdCBpbmRpY2VzID0gY2x1c3Rlci5wb2ludHM7XG4gIGNvbnN0IGMxSWR4ID0gaW5kaWNlc1swXTtcbiAgY29uc3QgYzJJZHggPSBpbmRpY2VzW01hdGguZmxvb3IoaW5kaWNlcy5sZW5ndGggLyAyKV07XG5cbiAgbGV0IGNlbnRyb2lkMSA9IHsgLi4ucG9pbnRzW2MxSWR4XSB9O1xuICBsZXQgY2VudHJvaWQyID0geyAuLi5wb2ludHNbYzJJZHhdIH07XG5cbiAgbGV0IGFzc2lnbm1lbnQ6IG51bWJlcltdID0gbmV3IEFycmF5KHBvaW50cy5sZW5ndGgpLmZpbGwoMCk7XG4gIGxldCBjaGFuZ2VkID0gdHJ1ZTtcbiAgbGV0IGl0ZXJhdGlvbnMgPSAwO1xuXG4gIC8vIFJ1biBrLW1lYW5zIGZvciBhIGZldyBpdGVyYXRpb25zXG4gIHdoaWxlIChjaGFuZ2VkICYmIGl0ZXJhdGlvbnMgPCAxMCkge1xuICAgIGNoYW5nZWQgPSBmYWxzZTtcbiAgICBpdGVyYXRpb25zKys7XG5cbiAgICAvLyBBc3NpZ24gcG9pbnRzIHRvIG5lYXJlc3QgY2VudHJvaWRcbiAgICBmb3IgKGNvbnN0IGlkeCBvZiBpbmRpY2VzKSB7XG4gICAgICBpZiAoIXBvaW50c1tpZHhdKSBjb250aW51ZTtcbiAgICAgIFxuICAgICAgY29uc3QgZGlzdDEgPSBldWNsaWRlYW5EaXN0YW5jZShwb2ludHNbaWR4XSwgY2VudHJvaWQxKTtcbiAgICAgIGNvbnN0IGRpc3QyID0gZXVjbGlkZWFuRGlzdGFuY2UocG9pbnRzW2lkeF0sIGNlbnRyb2lkMik7XG4gICAgICBjb25zdCBuZXdBc3NpZ25tZW50ID0gZGlzdDEgPCBkaXN0MiA/IDAgOiAxO1xuXG4gICAgICBpZiAoYXNzaWdubWVudFtpZHhdICE9PSBuZXdBc3NpZ25tZW50KSB7XG4gICAgICAgIGFzc2lnbm1lbnRbaWR4XSA9IG5ld0Fzc2lnbm1lbnQ7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjZW50cm9pZHNcbiAgICBjb25zdCBncm91cDEgPSBpbmRpY2VzLmZpbHRlcihpZHggPT4gYXNzaWdubWVudFtpZHhdID09PSAwKTtcbiAgICBjb25zdCBncm91cDIgPSBpbmRpY2VzLmZpbHRlcihpZHggPT4gYXNzaWdubWVudFtpZHhdID09PSAxKTtcblxuICAgIGlmIChncm91cDEubGVuZ3RoID4gMCkge1xuICAgICAgY2VudHJvaWQxID0ge1xuICAgICAgICB4OiBncm91cDEucmVkdWNlKChzdW0sIGlkeCkgPT4gc3VtICsgcG9pbnRzW2lkeF0ueCwgMCkgLyBncm91cDEubGVuZ3RoLFxuICAgICAgICB5OiBncm91cDEucmVkdWNlKChzdW0sIGlkeCkgPT4gc3VtICsgcG9pbnRzW2lkeF0ueSwgMCkgLyBncm91cDEubGVuZ3RoLFxuICAgICAgICBpZDogJycsXG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChncm91cDIubGVuZ3RoID4gMCkge1xuICAgICAgY2VudHJvaWQyID0ge1xuICAgICAgICB4OiBncm91cDIucmVkdWNlKChzdW0sIGlkeCkgPT4gc3VtICsgcG9pbnRzW2lkeF0ueCwgMCkgLyBncm91cDIubGVuZ3RoLFxuICAgICAgICB5OiBncm91cDIucmVkdWNlKChzdW0sIGlkeCkgPT4gc3VtICsgcG9pbnRzW2lkeF0ueSwgMCkgLyBncm91cDIubGVuZ3RoLFxuICAgICAgICBpZDogJycsXG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdyb3VwMSA9IGluZGljZXMuZmlsdGVyKGlkeCA9PiBhc3NpZ25tZW50W2lkeF0gPT09IDApO1xuICBjb25zdCBncm91cDIgPSBpbmRpY2VzLmZpbHRlcihpZHggPT4gYXNzaWdubWVudFtpZHhdID09PSAxKTtcblxuICByZXR1cm4ge1xuICAgIGNsdXN0ZXIxOiB7XG4gICAgICBwb2ludHM6IGdyb3VwMSxcbiAgICAgIGNlbnRlcjogY2VudHJvaWQxLFxuICAgIH0sXG4gICAgY2x1c3RlcjI6IHtcbiAgICAgIHBvaW50czogZ3JvdXAyLFxuICAgICAgY2VudGVyOiBjZW50cm9pZDIsXG4gICAgfSxcbiAgfTtcbn1cblxuLy8gR2V0IGZpbmFsIGNsdXN0ZXJzIGZyb20gc3RlcHNcbmZ1bmN0aW9uIGdldEZpbmFsQ2x1c3RlcnMoc3RlcHM6IE1lcmdlU3RlcFtdLCBudW1Qb2ludHM6IG51bWJlciwgdGFyZ2V0Q2x1c3RlcnM6IG51bWJlcik6IG51bWJlcltdW10ge1xuICBpZiAoc3RlcHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtBcnJheS5mcm9tKHsgbGVuZ3RoOiBudW1Qb2ludHMgfSwgKF8sIGkpID0+IGkpXTtcbiAgfVxuXG4gIC8vIEdldCBjbHVzdGVycyBhdCBhIHNwZWNpZmljIHN0ZXAgdGhhdCBnaXZlcyB1cyBjbG9zZSB0byB0YXJnZXRDbHVzdGVyc1xuICBjb25zdCB0YXJnZXRTdGVwID0gTWF0aC5tYXgoMCwgc3RlcHMubGVuZ3RoIC0gdGFyZ2V0Q2x1c3RlcnMgLSAxKTtcbiAgXG4gIC8vIFRyYWNrIHdoaWNoIHBvaW50cyBiZWxvbmcgdG8gd2hpY2ggY2x1c3RlclxuICBjb25zdCBwb2ludFRvQ2x1c3RlciA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XG4gIGNvbnN0IGNsdXN0ZXJzID0gbmV3IE1hcDxudW1iZXIsIFNldDxudW1iZXI+PigpO1xuXG4gIC8vIEluaXRpYWxpemUgZWFjaCBwb2ludCBhcyBpdHMgb3duIGNsdXN0ZXJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgIHBvaW50VG9DbHVzdGVyLnNldChpLCBpKTtcbiAgICBjbHVzdGVycy5zZXQoaSwgbmV3IFNldChbaV0pKTtcbiAgfVxuXG4gIC8vIEFwcGx5IG1lcmdlcyB1cCB0byB0YXJnZXRTdGVwXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4odGFyZ2V0U3RlcCwgc3RlcHMubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgIGlmIChzdGVwLmFjdGlvbiA9PT0gJ2NvbXBsZXRlJykgY29udGludWU7XG5cbiAgICBjb25zdCBjbHVzdGVyMUlkID0gcG9pbnRUb0NsdXN0ZXIuZ2V0KHN0ZXAuY2x1c3RlcjFbMF0pO1xuICAgIGNvbnN0IGNsdXN0ZXIySWQgPSBwb2ludFRvQ2x1c3Rlci5nZXQoc3RlcC5jbHVzdGVyMlswXSk7XG5cbiAgICBpZiAoY2x1c3RlcjFJZCA9PT0gdW5kZWZpbmVkIHx8IGNsdXN0ZXIySWQgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG5cbiAgICBjb25zdCBjbHVzdGVyMVBvaW50cyA9IGNsdXN0ZXJzLmdldChjbHVzdGVyMUlkKTtcbiAgICBjb25zdCBjbHVzdGVyMlBvaW50cyA9IGNsdXN0ZXJzLmdldChjbHVzdGVyMklkKTtcblxuICAgIGlmICghY2x1c3RlcjFQb2ludHMgfHwgIWNsdXN0ZXIyUG9pbnRzKSBjb250aW51ZTtcblxuICAgIC8vIE1lcmdlIGNsdXN0ZXIyIGludG8gY2x1c3RlcjFcbiAgICBjbHVzdGVyMlBvaW50cy5mb3JFYWNoKHBvaW50ID0+IHtcbiAgICAgIGNsdXN0ZXIxUG9pbnRzLmFkZChwb2ludCk7XG4gICAgICBwb2ludFRvQ2x1c3Rlci5zZXQocG9pbnQsIGNsdXN0ZXIxSWQpO1xuICAgIH0pO1xuXG4gICAgY2x1c3RlcnMuZGVsZXRlKGNsdXN0ZXIySWQpO1xuICB9XG5cbiAgLy8gQ29udmVydCB0byBhcnJheSBmb3JtYXRcbiAgcmV0dXJuIEFycmF5LmZyb20oY2x1c3RlcnMudmFsdWVzKCkpLm1hcChjbHVzdGVyID0+IEFycmF5LmZyb20oY2x1c3RlcikpO1xufVxuIl0sIm5hbWVzIjpbImV1Y2xpZGVhbkRpc3RhbmNlIiwicDEiLCJwMiIsIk1hdGgiLCJzcXJ0IiwieCIsInkiLCJjbHVzdGVyRGlzdGFuY2UiLCJjMSIsImMyIiwicG9pbnRzIiwidG90YWxEaXN0YW5jZSIsImNvdW50IiwiaSIsImoiLCJJbmZpbml0eSIsImdldENsdXN0ZXJDZW50ZXIiLCJjbHVzdGVyIiwic3VtWCIsInN1bVkiLCJpZHgiLCJhZ2dsb21lcmF0aXZlQ2x1c3RlcmluZyIsInN0ZXBzIiwiZGVuZHJvZ3JhbU5vZGVzIiwibWFwIiwicCIsImhlaWdodCIsImxhYmVsIiwiaWQiLCJpbmRpY2VzIiwiY2x1c3RlcnMiLCJjZW50ZXIiLCJzdGVwTnVtYmVyIiwicHVzaCIsImRlc2NyaXB0aW9uIiwibGVuZ3RoIiwiY2x1c3RlcjEiLCJjbHVzdGVyMiIsIm1lcmdlZENsdXN0ZXIiLCJkaXN0YW5jZSIsImFjdGlvbiIsIm1pbkRpc3RhbmNlIiwibWVyZ2VJIiwibWVyZ2VKIiwiZGlzdCIsIm1lcmdlZFBvaW50cyIsIm5ld05vZGUiLCJsZWZ0IiwicmlnaHQiLCJ0b0ZpeGVkIiwiZmlsdGVyIiwiXyIsInNwbGljZSIsImRlbmRyb2dyYW0iLCJmaW5hbENsdXN0ZXJzIiwiZ2V0RmluYWxDbHVzdGVycyIsImRpdmlzaXZlQ2x1c3RlcmluZyIsIkFycmF5IiwiZnJvbSIsIm1pbiIsIm1heFNpemUiLCJzcGxpdElkeCIsImZvckVhY2giLCJjbHVzdGVyVG9TcGxpdCIsInNwbGl0Q2x1c3RlciIsImMiLCJjMUlkeCIsImMySWR4IiwiZmxvb3IiLCJjZW50cm9pZDEiLCJjZW50cm9pZDIiLCJhc3NpZ25tZW50IiwiZmlsbCIsImNoYW5nZWQiLCJpdGVyYXRpb25zIiwiZGlzdDEiLCJkaXN0MiIsIm5ld0Fzc2lnbm1lbnQiLCJncm91cDEiLCJncm91cDIiLCJyZWR1Y2UiLCJzdW0iLCJkYXRhIiwibnVtUG9pbnRzIiwidGFyZ2V0Q2x1c3RlcnMiLCJ0YXJnZXRTdGVwIiwibWF4IiwicG9pbnRUb0NsdXN0ZXIiLCJNYXAiLCJzZXQiLCJTZXQiLCJzdGVwIiwiY2x1c3RlcjFJZCIsImdldCIsImNsdXN0ZXIySWQiLCJ1bmRlZmluZWQiLCJjbHVzdGVyMVBvaW50cyIsImNsdXN0ZXIyUG9pbnRzIiwicG9pbnQiLCJhZGQiLCJkZWxldGUiLCJ2YWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/clustering.ts\n");

/***/ }),

/***/ "(rsc)/./shared/schema.ts":
/*!**************************!*\
  !*** ./shared/schema.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clusterRequestSchema: () => (/* binding */ clusterRequestSchema),\n/* harmony export */   clusterResponseSchema: () => (/* binding */ clusterResponseSchema),\n/* harmony export */   crimeSiteSchema: () => (/* binding */ crimeSiteSchema),\n/* harmony export */   customerSchema: () => (/* binding */ customerSchema),\n/* harmony export */   medicalPatientSchema: () => (/* binding */ medicalPatientSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n// Medical Patient Dataset\nconst medicalPatientSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    Patient_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    Age: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Temperature_F: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Blood_Pressure_Sys: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Blood_Pressure_Dia: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Sugar_Level_mg_dL: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Symptoms: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\n// Crime Site Dataset\nconst crimeSiteSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    Crime_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    Latitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Longitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Crime_Type: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    Time_of_Day: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    Severity_Level: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Reported_By: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\n// Customer Segmentation Dataset\nconst customerSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    Customer_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    Age: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Annual_Income_kUSD: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Spending_Score: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Loyalty_Years: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    Preferred_Category: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\n// Clustering Request/Response\nconst clusterRequestSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    dataset: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"medical\",\n        \"crime\",\n        \"customer\"\n    ]),\n    algorithm: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"agglomerative\",\n        \"divisive\"\n    ]),\n    dataPoints: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        x: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        y: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        data: zod__WEBPACK_IMPORTED_MODULE_0__.z.any()\n    })),\n    numClusters: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional()\n});\nconst clusterResponseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    steps: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.any()),\n    finalClusters: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.number())),\n    dendrogram: zod__WEBPACK_IMPORTED_MODULE_0__.z.any()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zaGFyZWQvc2NoZW1hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3QjtBQUV4QiwwQkFBMEI7QUFDbkIsTUFBTUMsdUJBQXVCRCxrQ0FBQ0EsQ0FBQ0UsTUFBTSxDQUFDO0lBQzNDQyxZQUFZSCxrQ0FBQ0EsQ0FBQ0ksTUFBTTtJQUNwQkMsS0FBS0wsa0NBQUNBLENBQUNNLE1BQU07SUFDYkMsZUFBZVAsa0NBQUNBLENBQUNNLE1BQU07SUFDdkJFLG9CQUFvQlIsa0NBQUNBLENBQUNNLE1BQU07SUFDNUJHLG9CQUFvQlQsa0NBQUNBLENBQUNNLE1BQU07SUFDNUJJLG1CQUFtQlYsa0NBQUNBLENBQUNNLE1BQU07SUFDM0JLLFVBQVVYLGtDQUFDQSxDQUFDSSxNQUFNO0FBQ3BCLEdBQUc7QUFJSCxxQkFBcUI7QUFDZCxNQUFNUSxrQkFBa0JaLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDdENXLFVBQVViLGtDQUFDQSxDQUFDSSxNQUFNO0lBQ2xCVSxVQUFVZCxrQ0FBQ0EsQ0FBQ00sTUFBTTtJQUNsQlMsV0FBV2Ysa0NBQUNBLENBQUNNLE1BQU07SUFDbkJVLFlBQVloQixrQ0FBQ0EsQ0FBQ0ksTUFBTTtJQUNwQmEsYUFBYWpCLGtDQUFDQSxDQUFDSSxNQUFNO0lBQ3JCYyxnQkFBZ0JsQixrQ0FBQ0EsQ0FBQ00sTUFBTTtJQUN4QmEsYUFBYW5CLGtDQUFDQSxDQUFDSSxNQUFNO0FBQ3ZCLEdBQUc7QUFJSCxnQ0FBZ0M7QUFDekIsTUFBTWdCLGlCQUFpQnBCLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDckNtQixhQUFhckIsa0NBQUNBLENBQUNJLE1BQU07SUFDckJDLEtBQUtMLGtDQUFDQSxDQUFDTSxNQUFNO0lBQ2JnQixvQkFBb0J0QixrQ0FBQ0EsQ0FBQ00sTUFBTTtJQUM1QmlCLGdCQUFnQnZCLGtDQUFDQSxDQUFDTSxNQUFNO0lBQ3hCa0IsZUFBZXhCLGtDQUFDQSxDQUFDTSxNQUFNO0lBQ3ZCbUIsb0JBQW9CekIsa0NBQUNBLENBQUNJLE1BQU07QUFDOUIsR0FBRztBQWlDSCw4QkFBOEI7QUFDdkIsTUFBTXNCLHVCQUF1QjFCLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDM0N5QixTQUFTM0Isa0NBQUNBLENBQUM0QixJQUFJLENBQUM7UUFBQztRQUFXO1FBQVM7S0FBVztJQUNoREMsV0FBVzdCLGtDQUFDQSxDQUFDNEIsSUFBSSxDQUFDO1FBQUM7UUFBaUI7S0FBVztJQUMvQ0UsWUFBWTlCLGtDQUFDQSxDQUFDK0IsS0FBSyxDQUFDL0Isa0NBQUNBLENBQUNFLE1BQU0sQ0FBQztRQUMzQjhCLEdBQUdoQyxrQ0FBQ0EsQ0FBQ00sTUFBTTtRQUNYMkIsR0FBR2pDLGtDQUFDQSxDQUFDTSxNQUFNO1FBQ1g0QixNQUFNbEMsa0NBQUNBLENBQUNtQyxHQUFHO0lBQ2I7SUFDQUMsYUFBYXBDLGtDQUFDQSxDQUFDTSxNQUFNLEdBQUcrQixRQUFRO0FBQ2xDLEdBQUc7QUFJSSxNQUFNQyx3QkFBd0J0QyxrQ0FBQ0EsQ0FBQ0UsTUFBTSxDQUFDO0lBQzVDcUMsT0FBT3ZDLGtDQUFDQSxDQUFDK0IsS0FBSyxDQUFDL0Isa0NBQUNBLENBQUNtQyxHQUFHO0lBQ3BCSyxlQUFleEMsa0NBQUNBLENBQUMrQixLQUFLLENBQUMvQixrQ0FBQ0EsQ0FBQytCLEtBQUssQ0FBQy9CLGtDQUFDQSxDQUFDTSxNQUFNO0lBQ3ZDbUMsWUFBWXpDLGtDQUFDQSxDQUFDbUMsR0FBRztBQUNuQixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVzdC1leHByZXNzLy4vc2hhcmVkL3NjaGVtYS50cz8xYjQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbi8vIE1lZGljYWwgUGF0aWVudCBEYXRhc2V0XG5leHBvcnQgY29uc3QgbWVkaWNhbFBhdGllbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIFBhdGllbnRfSUQ6IHouc3RyaW5nKCksXG4gIEFnZTogei5udW1iZXIoKSxcbiAgVGVtcGVyYXR1cmVfRjogei5udW1iZXIoKSxcbiAgQmxvb2RfUHJlc3N1cmVfU3lzOiB6Lm51bWJlcigpLFxuICBCbG9vZF9QcmVzc3VyZV9EaWE6IHoubnVtYmVyKCksXG4gIFN1Z2FyX0xldmVsX21nX2RMOiB6Lm51bWJlcigpLFxuICBTeW1wdG9tczogei5zdHJpbmcoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBNZWRpY2FsUGF0aWVudCA9IHouaW5mZXI8dHlwZW9mIG1lZGljYWxQYXRpZW50U2NoZW1hPjtcblxuLy8gQ3JpbWUgU2l0ZSBEYXRhc2V0XG5leHBvcnQgY29uc3QgY3JpbWVTaXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBDcmltZV9JRDogei5zdHJpbmcoKSxcbiAgTGF0aXR1ZGU6IHoubnVtYmVyKCksXG4gIExvbmdpdHVkZTogei5udW1iZXIoKSxcbiAgQ3JpbWVfVHlwZTogei5zdHJpbmcoKSxcbiAgVGltZV9vZl9EYXk6IHouc3RyaW5nKCksXG4gIFNldmVyaXR5X0xldmVsOiB6Lm51bWJlcigpLFxuICBSZXBvcnRlZF9CeTogei5zdHJpbmcoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBDcmltZVNpdGUgPSB6LmluZmVyPHR5cGVvZiBjcmltZVNpdGVTY2hlbWE+O1xuXG4vLyBDdXN0b21lciBTZWdtZW50YXRpb24gRGF0YXNldFxuZXhwb3J0IGNvbnN0IGN1c3RvbWVyU2NoZW1hID0gei5vYmplY3Qoe1xuICBDdXN0b21lcl9JRDogei5zdHJpbmcoKSxcbiAgQWdlOiB6Lm51bWJlcigpLFxuICBBbm51YWxfSW5jb21lX2tVU0Q6IHoubnVtYmVyKCksXG4gIFNwZW5kaW5nX1Njb3JlOiB6Lm51bWJlcigpLFxuICBMb3lhbHR5X1llYXJzOiB6Lm51bWJlcigpLFxuICBQcmVmZXJyZWRfQ2F0ZWdvcnk6IHouc3RyaW5nKCksXG59KTtcblxuZXhwb3J0IHR5cGUgQ3VzdG9tZXIgPSB6LmluZmVyPHR5cGVvZiBjdXN0b21lclNjaGVtYT47XG5cbi8vIEdlbmVyaWMgRGF0YSBQb2ludCBmb3Igc2NhdHRlciBwbG90XG5leHBvcnQgaW50ZXJmYWNlIERhdGFQb2ludCB7XG4gIGlkOiBzdHJpbmc7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBkYXRhOiBNZWRpY2FsUGF0aWVudCB8IENyaW1lU2l0ZSB8IEN1c3RvbWVyO1xuICBjbHVzdGVyPzogbnVtYmVyO1xuICBpc05ldz86IGJvb2xlYW47XG59XG5cbi8vIENsdXN0ZXJpbmcgU3RlcCBmb3IgYW5pbWF0aW9uXG5leHBvcnQgaW50ZXJmYWNlIENsdXN0ZXJTdGVwIHtcbiAgc3RlcE51bWJlcjogbnVtYmVyO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb25uZWN0ZWRQYWlycz86IEFycmF5PFtudW1iZXIsIG51bWJlcl0+OyAvLyBpbmRpY2VzIG9mIHBvaW50cyBiZWluZyBjb25uZWN0ZWRcbiAgbWVyZ2VkQ2x1c3RlcnM/OiBBcnJheTxudW1iZXJbXT47IC8vIGFycmF5cyBvZiBwb2ludCBpbmRpY2VzIGluIGVhY2ggY2x1c3RlclxuICBkZW5kcm9ncmFtSGVpZ2h0PzogbnVtYmVyO1xuICBhY3Rpb246ICdjb25uZWN0JyB8ICdtZXJnZScgfCAnY29tcGxldGUnO1xufVxuXG4vLyBDbHVzdGVyIEluZm8gZm9yIHRvb2x0aXBzXG5leHBvcnQgaW50ZXJmYWNlIENsdXN0ZXJJbmZvIHtcbiAgaWQ6IG51bWJlcjtcbiAgcG9pbnRJbmRpY2VzOiBudW1iZXJbXTtcbiAgY29sb3I6IHN0cmluZztcbiAgc3RhdHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGRpYWdub3Npcz86IHN0cmluZztcbn1cblxuLy8gQ2x1c3RlcmluZyBSZXF1ZXN0L1Jlc3BvbnNlXG5leHBvcnQgY29uc3QgY2x1c3RlclJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRhdGFzZXQ6IHouZW51bShbJ21lZGljYWwnLCAnY3JpbWUnLCAnY3VzdG9tZXInXSksXG4gIGFsZ29yaXRobTogei5lbnVtKFsnYWdnbG9tZXJhdGl2ZScsICdkaXZpc2l2ZSddKSxcbiAgZGF0YVBvaW50czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgeDogei5udW1iZXIoKSxcbiAgICB5OiB6Lm51bWJlcigpLFxuICAgIGRhdGE6IHouYW55KCksXG4gIH0pKSxcbiAgbnVtQ2x1c3RlcnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBDbHVzdGVyUmVxdWVzdCA9IHouaW5mZXI8dHlwZW9mIGNsdXN0ZXJSZXF1ZXN0U2NoZW1hPjtcblxuZXhwb3J0IGNvbnN0IGNsdXN0ZXJSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgc3RlcHM6IHouYXJyYXkoei5hbnkoKSksXG4gIGZpbmFsQ2x1c3RlcnM6IHouYXJyYXkoei5hcnJheSh6Lm51bWJlcigpKSksXG4gIGRlbmRyb2dyYW06IHouYW55KCksXG59KTtcblxuZXhwb3J0IHR5cGUgQ2x1c3RlclJlc3BvbnNlID0gei5pbmZlcjx0eXBlb2YgY2x1c3RlclJlc3BvbnNlU2NoZW1hPjtcblxuLy8gRGF0YXNldCBjb25maWd1cmF0aW9uXG5leHBvcnQgaW50ZXJmYWNlIERhdGFzZXRDb25maWcge1xuICBpZDogJ21lZGljYWwnIHwgJ2NyaW1lJyB8ICdjdXN0b21lcic7XG4gIG5hbWU6IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICB4QXhpczogeyBsYWJlbDogc3RyaW5nOyBrZXk6IHN0cmluZyB9O1xuICB5QXhpczogeyBsYWJlbDogc3RyaW5nOyBrZXk6IHN0cmluZyB9O1xuICBhdmFpbGFibGVBeGVzPzogQXJyYXk8eyBsYWJlbDogc3RyaW5nOyBrZXk6IHN0cmluZzsgcmFuZ2U6IFtudW1iZXIsIG51bWJlcl0gfT47XG4gIHRvb2x0aXBGaWVsZHM6IEFycmF5PHsgbGFiZWw6IHN0cmluZzsga2V5OiBzdHJpbmc7IGZvcm1hdD86ICh2YWw6IG51bWJlciwgZGF0YT86IGFueSkgPT4gc3RyaW5nIH0+O1xuICBjbHVzdGVyQ29sb3JzOiBzdHJpbmdbXTtcbiAgZ2V0RGlhZ25vc2lzPzogKHN0YXRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSA9PiBzdHJpbmc7XG4gIGdldFN0b3J5U3RlcD86IChzdGVwOiBudW1iZXIsIGFsZ29yaXRobTogJ2FnZ2xvbWVyYXRpdmUnIHwgJ2RpdmlzaXZlJykgPT4gc3RyaW5nO1xufVxuIl0sIm5hbWVzIjpbInoiLCJtZWRpY2FsUGF0aWVudFNjaGVtYSIsIm9iamVjdCIsIlBhdGllbnRfSUQiLCJzdHJpbmciLCJBZ2UiLCJudW1iZXIiLCJUZW1wZXJhdHVyZV9GIiwiQmxvb2RfUHJlc3N1cmVfU3lzIiwiQmxvb2RfUHJlc3N1cmVfRGlhIiwiU3VnYXJfTGV2ZWxfbWdfZEwiLCJTeW1wdG9tcyIsImNyaW1lU2l0ZVNjaGVtYSIsIkNyaW1lX0lEIiwiTGF0aXR1ZGUiLCJMb25naXR1ZGUiLCJDcmltZV9UeXBlIiwiVGltZV9vZl9EYXkiLCJTZXZlcml0eV9MZXZlbCIsIlJlcG9ydGVkX0J5IiwiY3VzdG9tZXJTY2hlbWEiLCJDdXN0b21lcl9JRCIsIkFubnVhbF9JbmNvbWVfa1VTRCIsIlNwZW5kaW5nX1Njb3JlIiwiTG95YWx0eV9ZZWFycyIsIlByZWZlcnJlZF9DYXRlZ29yeSIsImNsdXN0ZXJSZXF1ZXN0U2NoZW1hIiwiZGF0YXNldCIsImVudW0iLCJhbGdvcml0aG0iLCJkYXRhUG9pbnRzIiwiYXJyYXkiLCJ4IiwieSIsImRhdGEiLCJhbnkiLCJudW1DbHVzdGVycyIsIm9wdGlvbmFsIiwiY2x1c3RlclJlc3BvbnNlU2NoZW1hIiwic3RlcHMiLCJmaW5hbENsdXN0ZXJzIiwiZGVuZHJvZ3JhbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./shared/schema.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcluster%2Froute&page=%2Fapi%2Fcluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcluster%2Froute.ts&appDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdharmikgalla%2FDHV-project-2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();